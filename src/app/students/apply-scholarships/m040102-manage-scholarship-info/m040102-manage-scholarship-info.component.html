<form *ngIf="applyApplication.pageRender" [formGroup]="scholarshipFormGroup" (ngSubmit)="onNext()">
    <div class="row overide-row">
        <h4 class="custom-panel-title">ข้อมูลทุนการศึกษา</h4>
    </div>
    <div class="row overide-row" styleClass="fullWidth">
        <div class="col-xs-12">
            <label class="normal">ทุนการศึกษา *</label>
            <p-autoComplete
              [suggestions]="autocompleteScholarshipAnnouncementList"
              formControlName="scholarshipAnnouncementName"
              [(ngModel)]="applyApplication.applyApplicationForm.autocompleteScholarshipAnnouncement"
              (onSelect)="selectedData()"
              [dropdown]="true"
              [disabled]="applyApplication.applyApplicationForm.apApplication.application_ref"
              (completeMethod)="autocompleteScholarship($event)"
              (onDropdownClick)="handleCompleteClickautocompleteScholarship($event)"
              field="name" size="85"
              [forceSelection]="true"
              name="autocompleteScholarship">
            </p-autoComplete>
        </div>
    </div>
    <div class="row overide-row">
        <div class="col-xs-3">
            <label class="normal">ประเภททุนการศึกษา</label>
            {{applyApplication.applyApplicationForm.sctype_name}}
        </div>
        <div class="col-xs-6">
            <label class="normal">ผู้สนับสนุน</label>
            {{applyApplication.applyApplicationForm.sponsors_name}}
        </div>
        <div class="col-xs-3">
            <label class="normal">เกรดขั้นต่ำ</label>
            {{applyApplication.applyApplicationForm.min_gpax}}
        </div>
    </div>
    <div class="row overide-row">
        <div class="col-xs-12">
            <label for="" class="normal">รายละเอียดทุนการศึกษา</label>
            {{applyApplication.applyApplicationForm.detail}}
        </div>
    </div>
    <div class="row overide-row">
        <h4 class="custom-panel-title">ประวัติทุนการศึกษา (ทุกประเภท)</h4>
    </div>
    <div class="row overide-row">
        <div class="col-xs-12">
            <p-dataTable
              [value]="applyApplication.applyApplicationForm.apScholarshipHistory"
              [immutable]="false">
                <p-column styleClass="datatable-index"  header="ลำดับ"  field="seq">
                    <ng-template
                      let-col
                      let-obj="rowIndex"
                      pTemplate="body">
                        {{obj+1}}
                    </ng-template>
                </p-column>
                <p-column header="ชื่อทุนการศึกษา" field="scholarship_name">
                    <ng-template let-col let-obj="rowData" pTemplate="body">
                        <input type="text"
                          [ngModelOptions]="{standalone: true}"
                          [(ngModel)]="obj.scholarship_name"
                          pInputText>
                    </ng-template>
                </p-column>
                <p-column header="ปีการศึกษา" field="year" size="20px">
                    <ng-template let-col let-obj="rowData" pTemplate="body">
                        <input type="text"
                          [(ngModel)]="obj.year"
                          [ngModelOptions]="{standalone: true}"
                          minlength="4"
                          maxlength="4"
                          pInputText>
                    </ng-template>
                </p-column>
                <p-column field="debt_amount">
                    <ng-template pTemplate="header">
                        <div class="text-left">จำนวน(บาท)</div>
                        <button class="ui-button-success btn-position"
                          type="button"
                          icon="fa-plus"
                          (click)="addScholarship()"
                          pButton>
                        </button>
                    </ng-template>
                    <ng-template let-col let-obj="rowData" pTemplate="body">
                        <input type="text"
                          [(ngModel)]="obj.money_amount"
                          [ngModelOptions]="{standalone: true}"
                          [options]="{ prefix: '', thousands: ',', decimal: '.' }"
                          min="0"
                          maxlength='9'
                          max="999999.99"
                          currencyMask
                          pInputText>
                        <button class="ui-button-warning btn-position"
                          type="button"
                          icon="fa-minus"
                          (click)="deleteScholarship(obj)"
                          pButton>
                        </button>
                    </ng-template>
                </p-column>
            </p-dataTable>
        </div>
    </div>
    <div class="row overide-row">
        <h4 class="custom-panel-title">กองทุนกู้ยืมเพื่อการศึกษา</h4>
    </div>
    <div class="row overide-row">
        <div class="col-xs-12 txt-area-center">
            <p-dataTable [value]="applyApplication.applyApplicationForm.apStudentLoanFund" [immutable]="false">
                <p-column styleClass="datatable-index" header="ลำดับ" field="student_loan_seq" >
                    <ng-template let-col let-obj="rowIndex" pTemplate="body">
                        {{obj+1}}
                    </ng-template>
                </p-column>
                <p-column header="ปีการศึกษา" field="year">
                    <ng-template let-col let-obj="rowData" pTemplate="body">
                        <input type="text"
                          [ngModelOptions]="{standalone: true}"
                          minlength="4"
                          maxlength="4"
                          [(ngModel)]="obj.year"
                          pInputText>
                    </ng-template>
                </p-column>
                <p-column field="money_amount">
                    <ng-template pTemplate="header">
                        <div class="text-left">จำนวน(บาท)</div>
                        <button class="ui-button-success btn-position"
                          type="button"
                          icon="fa-plus"
                          (click)="addStdLoan()"
                          pButton>
                        </button>
                    </ng-template>
                    <ng-template let-col let-obj="rowData" pTemplate="body">
                        <input type="text"
                          [ngModelOptions]="{standalone: true}"
                          [options]="{ prefix: '', thousands: ',', decimal: '.' }"
                          min="0"
                          maxlength="9"
                          max="999999.99"
                          currencyMask
                          [(ngModel)]="obj.money_amount"
                          pInputText>
                        <button class="ui-button-warning btn-position"
                          type="button"
                          icon="fa-minus"
                          (click)="deleteStdLoan(obj)"
                          pButton>
                        </button>
                    </ng-template>
                </p-column>
            </p-dataTable>
        </div>
    </div>
    <div class="row overide-row">
        <h4 class="custom-panel-title">แผนการใช้เงิน</h4>
        <div class="col-xs-12 txt-area-center">
            <textarea class="fullWidth"
              [(ngModel)]="applyApplication.applyApplicationForm.apApplication.money_spend_plan"
              name="money_spend_plan"
              formControlName="money_spend_plan"
              pInputTextarea>
            </textarea>
        </div>
    </div>
    <div class="row formFooter overide-row">
        <div class="col-xs-12">
            <button class="ui-button-warning text-left"
            type="button"
            (click)="onPrevious()"
            label="กลับ"
            pButton>
          </button>
            <button class="ui-button-primary text-right"
              type="submit"
              label="ต่อไป"
              pButton>
            </button>

        </div>
    </div>
</form>
